<!doctype html>
<!--[if IE 9]>
<html class="lt-ie10" lang="en"> <![endif]-->
<html class="no-js" lang="en" data-useragent="Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title></title>

  <meta name="description"
        content="Bolt Protocol - a highly efficient, lightweight messaging protocol for databases"/>

  <link rel="canonical" href="https://boltprotocol.org/v1/examples.html" />

  <meta name="copyright" content="Creative Commons 3.0 Attribution-ShareAlike"/>

  <link rel="stylesheet" href="/css/foundation.css"/>
  <link rel="stylesheet" href="/css/asciidoctor.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/coderay.css"/>

  <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/images/apple-touch-icon-57x57.png" />
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114.png" />
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72.png" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144.png" />
  <link rel="apple-touch-icon-precomposed" sizes="60x60" href="/images/apple-touch-icon-60x60.png" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/images/apple-touch-icon-120x120.png" />
  <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/images/apple-touch-icon-76x76.png" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/images/apple-touch-icon-152x152.png" />
  <link rel="icon" type="image/png" href="/images/favicon-196x196.png" sizes="196x196" />
  <link rel="icon" type="image/png" href="/images/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16" />
  <link rel="icon" type="image/png" href="/images/favicon-128.png" sizes="128x128" />
  <meta name="application-name" content="&nbsp;"/>
  <meta name="msapplication-TileColor" content="#FFFFFF" />
  <meta name="msapplication-TileImage" content="/images/mstile-144x144.png" />
  <meta name="msapplication-square70x70logo" content="/images/mstile-70x70.png" />
  <meta name="msapplication-square150x150logo" content="/images/mstile-150x150.png" />
  <meta name="msapplication-wide310x150logo" content="/images/mstile-310x150.png" />
  <meta name="msapplication-square310x310logo" content="/images/mstile-310x310.png" />

  <script src="/js/vendor/modernizr.js"></script>
  <script src="/js/toc.js"></script>
</head>
<body>

<nav class="top-bar" data-topbar>
  <ul class="title-area">
    <!-- Title Area -->
    <li class="name">
      <h1><a href="/">Bolt Protocol</a></h1>
    </li>
    <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
  </ul>

  <section class="top-bar-section">
    <ul class="left">
      <li class="has-dropdown name">
        <h1>
          <a href="/v1/">Version 1</a>
        </h1>
        <ul class="dropdown">
          <li><a href="/v1/#overview">Overview</a></li>
          <li><a href="/v1/#transport">Transport Layer</a></li>
          <li><a href="/v1/#messaging">Messaging</a></li>
          <li><a href="/v1/#serialization">Serialization</a></li>
          <li><a href="/v1/#examples">Examples</a></li>
        </ul>
      </li>
    </ul>
    <ul class="right hide-for-small">
      <img src="/images/boltprotocol.png" style="height: 6rem;margin: 5px 5px 0 0;" />
    </ul>
  </section>
</nav>

<section role="main" class="scroll-container">
  <div class="row">
    <div class="small-12 columns" role="content">
      <h1></h1>
      <div class="sect1">
<h2 id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section contains concrete examples showing how to perform tasks using the full Bolt protocol stack.</p>
</div>
<div class="sect2">
<h3 id="running_a_cypher_query"><a class="anchor" href="#running_a_cypher_query"></a>Running a Cypher query</h3>
<div class="paragraph">
<p>This illustrates running a simple Cypher query without parameters, and retrieving the results.</p>
</div>
<div class="listingblock">
<div class="title">Run query</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bolt_exchange"># Handshake
Client: &lt;connect&gt;
Client: 60 60 B0 17
Client: 00 00 00 01  00 00 00 00  00 00 00 00  00 00 00 00
Server: 00 00 00 01

Client: INIT &quot;MyClient/1.0&quot; { &quot;scheme&quot;: &quot;basic&quot;, &quot;principal&quot;: &quot;neo4j&quot;, &quot;credentials&quot;: &quot;secret&quot;}

  00 40 B1 01  8C 4D 79 43  6C 69 65 6E  74 2F 31 2E
  30 A3 86 73  63 68 65 6D  65 85 62 61  73 69 63 89
  70 72 69 6E  63 69 70 61  6C 85 6E 65  6F 34 6A 8B
  63 72 65 64  65 6E 74 69  61 6C 73 86  73 65 63 72
  65 74 00 00

Server: SUCCESS { &quot;server&quot;: &quot;Neo4j/3.1.0&quot; }

  00 16 B1 70  A1 86 73 65  72 76 65 72  8B 4E 65 6F
  34 6A 2F 33  2E 31 2E 30  00 00

Client: RUN &quot;RETURN 1 AS num&quot; {}

  00 13 b2 10  8f 52 45 54  55 52 4e 20  31 20 41 53
  20 6e 75 6d  a0 00 00

Server: SUCCESS { &quot;fields&quot;: [&quot;num&quot;], &quot;result_available_after&quot;: 12 }

  00 28 B1 70  A2 86 66 69  65 6C 64 73  91 83 6E 75
  6D D0 16 72  65 73 75 6C  74 5F 61 76  61 69 6C 61
  62 6C 65 5F  61 66 74 65  72 0C 00 00

Client: PULL_ALL

  00 02 B0 3F  00 00

Server: RECORD [1]

  00 04 b1 71  91 01 00 00

Server: SUCCESS { &quot;type&quot;: &quot;r&quot;, &quot;result_consumed_after&quot;: 12 }

 00 22 B1 70  A2 84 74 79  70 65 81 72  D0 15 72 65
 73 75 6C 74  5F 63 6F 6E  73 75 6D 65  64 5F 61 66
 74 65 72 0C  00 00</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pipelining"><a class="anchor" href="#pipelining"></a>Pipelining</h3>
<div class="paragraph">
<p>This illustrates running two statements and retrieving their results, without waiting for the server to respond
in-between.</p>
</div>
<div class="paragraph">
<p>Note that these two statements are executed in two individual transactions, implicitly created for each statement.</p>
</div>
<div class="listingblock">
<div class="title">Pipelining</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bolt_exchange"># Handshake
Client: &lt;connect&gt;
Client: 60 60 B0 17
Client: 00 00 00 01  00 00 00 00  00 00 00 00  00 00 00 00
Server: 00 00 00 01

Client: INIT &quot;MyClient/1.0&quot; { &quot;scheme&quot;: &quot;basic&quot;, &quot;principal&quot;: &quot;neo4j&quot;, &quot;credentials&quot;: &quot;secret&quot;}

  00 40 B1 01  8C 4D 79 43  6C 69 65 6E  74 2F 31 2E
  30 A3 86 73  63 68 65 6D  65 85 62 61  73 69 63 89
  70 72 69 6E  63 69 70 61  6C 85 6E 65  6F 34 6A 8B
  63 72 65 64  65 6E 74 69  61 6C 73 86  73 65 63 72
  65 74 00 00

Server: SUCCESS { &quot;server&quot;: &quot;Neo4j/3.1.0&quot; }

  00 16 B1 70  A1 86 73 65  72 76 65 72  8B 4E 65 6F
  34 6A 2F 33  2E 31 2E 30  00 00

# Batch of messages
Client: RUN &quot;RETURN 1 AS num&quot; {}

  00 13 b2 10  8f 52 45 54  55 52 4e 20  31 20 41 53
  20 6e 75 6d  a0 00 00

Client: PULL_ALL

  00 02 B0 3F  00 00

Client: RUN &quot;RETURN 1 AS num&quot; {}

  00 13 b2 10  8f 52 45 54  55 52 4e 20  31 20 41 53
  20 6e 75 6d  a0 00 00

Client: PULL_ALL

  00 02 B0 3F  00 00

# Server responses
Server: SUCCESS { &quot;fields&quot;: [&quot;num&quot;], &quot;result_available_after&quot;: 12 }

  00 28 B1 70  A2 86 66 69  65 6C 64 73  91 83 6E 75
  6D D0 16 72  65 73 75 6C  74 5F 61 76  61 69 6C 61
  62 6C 65 5F  61 66 74 65  72 0C 00 00

Server: RECORD [1]

  00 04 b1 71  91 01 00 00

Server: SUCCESS { &quot;type&quot;: &quot;r&quot;, &quot;result_consumed_after&quot;: 12 }

 00 22 B1 70  A2 84 74 79  70 65 81 72  D0 15 72 65
 73 75 6C 74  5F 63 6F 6E  73 75 6D 65  64 5F 61 66
 74 65 72 0C  00 00

Server: SUCCESS { &quot;fields&quot;: [&quot;num&quot;], &quot;result_available_after&quot;: 12 }

  00 28 B1 70  A2 86 66 69  65 6C 64 73  91 83 6E 75
  6D D0 16 72  65 73 75 6C  74 5F 61 76  61 69 6C 61
  62 6C 65 5F  61 66 74 65  72 0C 00 00

Server: RECORD [1]

  00 04 b1 71  91 01 00 00

Server: SUCCESS { &quot;type&quot;: &quot;r&quot;, &quot;result_consumed_after&quot;: 12 }

 00 22 B1 70  A2 84 74 79  70 65 81 72  D0 15 72 65
 73 75 6C 74  5F 63 6F 6E  73 75 6D 65  64 5F 61 66
 74 65 72 0C  00 00</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="examples-reset"><a class="anchor" href="#examples-reset"></a>Error handling with RESET</h3>
<div class="paragraph">
<p>This illustrates how the server behaves when a request fails, and shows how the server ignores incoming messages until a <code>RESET</code> message is received.</p>
</div>
<div class="listingblock">
<div class="title">Error handling with RESET</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bolt_exchange"># Handshake
Client: &lt;connect&gt;
Client: 60 60 B0 17
Client: 00 00 00 01  00 00 00 00  00 00 00 00  00 00 00 00
Server: 00 00 00 01

Client: INIT &quot;MyClient/1.0&quot; { &quot;scheme&quot;: &quot;basic&quot;, &quot;principal&quot;: &quot;neo4j&quot;, &quot;credentials&quot;: &quot;secret&quot;}

  00 40 B1 01  8C 4D 79 43  6C 69 65 6E  74 2F 31 2E
  30 A3 86 73  63 68 65 6D  65 85 62 61  73 69 63 89
  70 72 69 6E  63 69 70 61  6C 85 6E 65  6F 34 6A 8B
  63 72 65 64  65 6E 74 69  61 6C 73 86  73 65 63 72
  65 74 00 00

Server: SUCCESS { &quot;server&quot;: &quot;Neo4j/3.1.0&quot; }

  00 16 B1 70  A1 86 73 65  72 76 65 72  8B 4E 65 6F
  34 6A 2F 33  2E 31 2E 30  00 00

# Message with syntax error
Client: RUN &quot;This will cause a syntax error&quot; {}

  00 23 b2 10  d0 1e 54 68  69 73 20 77  69 6c 6c 20
  63 61 75 73  65 20 61 20  73 79 6e 74  61 78 20 65
  72 72 6f 72  a0 00 00


# Server responds with failure
Server: FAILURE { &quot;code&quot;: &quot;Neo.ClientError.Statement.SyntaxError&quot;,
                  &quot;message&quot;: &quot;Invalid input 'T': expected &lt;init&gt; (line 1, column 1 (offset: 0))
                          &quot;This will cause a syntax error&quot;
                           ^&quot;}

  00 9E B1 7F  A2 84 63 6F  64 65 D0 25  4E 65 6F 2E
  43 6C 69 65  6E 74 45 72  72 6F 72 2E  53 74 61 74
  65 6D 65 6E  74 2E 53 79  6E 74 61 78  45 72 72 6F
  72 87 6D 65  73 73 61 67  65 D0 65 49  6E 76 61 6C
  69 64 20 69  6E 70 75 74  20 27 54 27  3A 20 65 78
  70 65 63 74  65 64 20 3C  69 6E 69 74  3E 20 28 6C
  69 6E 65 20  31 2C 20 63  6F 6C 75 6D  6E 20 31 20
  28 6F 66 66  73 65 74 3A  20 30 29 29  0A 22 54 68
  69 73 20 77  69 6C 6C 20  63 61 75 73  65 20 61 20
  73 79 6E 74  61 78 20 65  72 72 6F 72  22 0A 20 5E
  00 00

# Further requests are ignored
Client: PULL_ALL

  00 02 b0 3f 00 00

Server: IGNORED

  00 02 b0 7e 00 00


# Until the error is acknowledged
Client: RESET

  00 02 b0 0f 00 00

Server: SUCCESS {}

  00 03 b1 70  a0 00 00


# Server is now ready for new statements
Client: RUN &quot;RETURN 1 AS num&quot; {}

  00 13 b2 10  8f 52 45 54  55 52 4e 20  31 20 41 53
  20 6e 75 6d  a0 00 00

Server: SUCCESS { &quot;fields&quot;: [&quot;num&quot;], &quot;result_available_after&quot;: 12 }

  00 28 B1 70  A2 86 66 69  65 6C 64 73  91 83 6E 75
  6D D0 16 72  65 73 75 6C  74 5F 61 76  61 69 6C 61
  62 6C 65 5F  61 66 74 65  72 0C 00 00</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="examples-ack-failure"><a class="anchor" href="#examples-ack-failure"></a>Error handling with ACK_FAILURE</h3>
<div class="paragraph">
<p>This illustrates how to handle errors with <code>ACK_FAILURE</code>.
<code>ACK_FAILURE</code> will not roll back transactions or interrupt messages ahead in line.
Instead, it only clears the error state and moves the session either to <code>IDLE</code> or to <code>IN_TRANSCATION</code>.</p>
</div>
<div class="paragraph">
<p>This is helpful, because it means you always have to run "ROLLBACK" to roll back an open transaction.
For some use cases, that helps minimize complexity, because it cuts down the number of error recovery paths.</p>
</div>
<div class="listingblock">
<div class="title">Error handling with ACK_FAILURE</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bolt_exchange"># Handshake
Client: &lt;connect&gt;
Client: 60 60 B0 17
Client: 00 00 00 01  00 00 00 00  00 00 00 00  00 00 00 00
Server: 00 00 00 01

Client: INIT &quot;MyClient/1.0&quot; { &quot;scheme&quot;: &quot;basic&quot;, &quot;principal&quot;: &quot;neo4j&quot;, &quot;credentials&quot;: &quot;secret&quot;}

  00 40 B1 01  8C 4D 79 43  6C 69 65 6E  74 2F 31 2E
  30 A3 86 73  63 68 65 6D  65 85 62 61  73 69 63 89
  70 72 69 6E  63 69 70 61  6C 85 6E 65  6F 34 6A 8B
  63 72 65 64  65 6E 74 69  61 6C 73 86  73 65 63 72
  65 74 00 00

Server: SUCCESS { &quot;server&quot;: &quot;Neo4j/3.1.0&quot; }

  00 16 B1 70  A1 86 73 65  72 76 65 72  8B 4E 65 6F
  34 6A 2F 33  2E 31 2E 30  00 00


# We explicitly create a transaction
Client: RUN &quot;BEGIN&quot; {}

  00 09 B2 10  85 42 45 47  49 4E A0 00  00

Client: PULL_ALL

  00 02 B0 3F  00 00

Server: SUCCESS { &quot;fields&quot;: [], &quot;result_available_after&quot;: 12 }

  00 24 B1 70  A2 86 66 69  65 6C 64 73  90 D0 16 72
  65 73 75 6C  74 5F 61 76  61 69 6C 61  62 6C 65 5F
  61 66 74 65  72 0C 00 00

Server: SUCCESS {}

  00 03 B1 70  A0 00 00


# And then send a message with a syntax error
Client: RUN &quot;This will cause a syntax error&quot; {}

  00 23 b2 10  d0 1e 54 68  69 73 20 77  69 6c 6c 20
  63 61 75 73  65 20 61 20  73 79 6e 74  61 78 20 65
  72 72 6f 72  a0 00 00


# Server responds with failure
Server: FAILURE { &quot;code&quot;: &quot;Neo.ClientError.Statement.SyntaxError&quot;,
                  &quot;message&quot;: &quot;Invalid input 'T': expected &lt;init&gt; (line 1, column 1 (offset: 0))
                          &quot;This will cause a syntax error&quot;
                           ^&quot;}

  00 9E B1 7F  A2 84 63 6F  64 65 D0 25  4E 65 6F 2E
  43 6C 69 65  6E 74 45 72  72 6F 72 2E  53 74 61 74
  65 6D 65 6E  74 2E 53 79  6E 74 61 78  45 72 72 6F
  72 87 6D 65  73 73 61 67  65 D0 65 49  6E 76 61 6C
  69 64 20 69  6E 70 75 74  20 27 54 27  3A 20 65 78
  70 65 63 74  65 64 20 3C  69 6E 69 74  3E 20 28 6C
  69 6E 65 20  31 2C 20 63  6F 6C 75 6D  6E 20 31 20
  28 6F 66 66  73 65 74 3A  20 30 29 29  0A 22 54 68
  69 73 20 77  69 6C 6C 20  63 61 75 73  65 20 61 20
  73 79 6E 74  61 78 20 65  72 72 6F 72  22 0A 20 5E
  00 00

# Further requests are ignored
Client: PULL_ALL

  00 02 b0 3f 00 00

Server: IGNORED

  00 02 b0 7e 00 00


# Until the error is acknowledged
Client: ACK_FAILURE

  00 02 B0 0E  00 00

Server: SUCCESS {}

  00 03 b1 70  a0 00 00


# The transaction remains in place, and can be rolled back
Client: RUN &quot;ROLLBACK&quot; {}

  00 0C B2 10  88 52 4F 4C  4C 42 41 43  4B A0 00 00

Server: SUCCESS { &quot;fields&quot;: [], &quot;result_available_after&quot;: 12 }

  00 24 B1 70  A2 86 66 69  65 6C 64 73  90 D0 16 72
  65 73 75 6C  74 5F 61 76  61 69 6C 61  62 6C 65 5F
  61 66 74 65  72 0C 00 00</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="accessing_basic_result_metadata"><a class="anchor" href="#accessing_basic_result_metadata"></a>Accessing basic result metadata</h3>
<div class="paragraph">
<p>If your statement performs changes to the graph or the schema, the <code>SUCCESS</code> message at the end of the result stream will contain statistics describing a summary of the changes.
It will also always contain a description of the type of statement ran - <code>read</code> (<code>r</code>),  <code>write</code> (<code>w</code>), <code>read/write</code> (<code>rw</code>) or <code>schema write</code> (<code>s</code>).</p>
</div>
<div class="listingblock">
<div class="title">Basic metadata</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bolt_exchange"># Handshake
Client: &lt;connect&gt;
Client: 60 60 B0 17
Client: 00 00 00 01  00 00 00 00  00 00 00 00  00 00 00 00
Server: 00 00 00 01

Client: INIT &quot;MyClient/1.0&quot; { &quot;scheme&quot;: &quot;basic&quot;, &quot;principal&quot;: &quot;neo4j&quot;, &quot;credentials&quot;: &quot;secret&quot;}

  00 40 B1 01  8C 4D 79 43  6C 69 65 6E  74 2F 31 2E
  30 A3 86 73  63 68 65 6D  65 85 62 61  73 69 63 89
  70 72 69 6E  63 69 70 61  6C 85 6E 65  6F 34 6A 8B
  63 72 65 64  65 6E 74 69  61 6C 73 86  73 65 63 72
  65 74 00 00

Server: SUCCESS { &quot;server&quot;: &quot;Neo4j/3.1.0&quot; }

  00 16 B1 70  A1 86 73 65  72 76 65 72  8B 4E 65 6F
  34 6A 2F 33  2E 31 2E 30  00 00

# Running a read-only statement will not return any statistics
Client: RUN &quot;RETURN 1 AS num&quot; {}

  00 13 B2 10  8F 52 45 54  55 52 4E 20  31 20 41 53
  20 6E 75 6D  A0 00 00

Server: SUCCESS { &quot;fields&quot;: [&quot;num&quot;], &quot;result_available_after&quot;: 12 }

  00 28 B1 70  A2 86 66 69  65 6C 64 73  91 83 6E 75
  6D D0 16 72  65 73 75 6C  74 5F 61 76  61 69 6C 61
  62 6C 65 5F  61 66 74 65  72 0C 00 00

Client: PULL_ALL

  00 02 B0 3F  00 00

Server: RECORD [1]

  00 04 b1 71  91 01 00 00

Server: SUCCESS { &quot;type&quot;: &quot;r&quot;, &quot;result_consumed_after&quot;: 12 }

 00 22 B1 70  A2 84 74 79  70 65 81 72  D0 15 72 65
 73 75 6C 74  5F 63 6F 6E  73 75 6D 65  64 5F 61 66
 74 65 72 0C  00 00

# Updating queries will return statistics that summarize all executed updates
Client: RUN &quot;CREATE ()&quot; {}

  00 0D B2 10  89 43 52 45  41 54 45 20  28 29 A0 00
  00

Server: SUCCESS { &quot;fields&quot;: [], &quot;result_available_after&quot;: 12 }

  00 24 B1 70  A2 86 66 69  65 6C 64 73  90 D0 16 72
  65 73 75 6C  74 5F 61 76  61 69 6C 61  62 6C 65 5F
  61 66 74 65  72 0C 00 00

Client: PULL_ALL

  00 02 B0 3F  00 00

Server: SUCCESS {
          &quot;type&quot;: &quot;w&quot;,
          &quot;stats&quot;: { &quot;nodes-created&quot;: 1 },
          &quot;result_consumed_after&quot;: 12
        }

  00 38 B1 70  A3 84 74 79  70 65 81 77  85 73 74 61
  74 73 A1 8D  6E 6F 64 65  73 2D 63 72  65 61 74 65
  64 01 D0 15  72 65 73 75  6C 74 5F 63  6F 6E 73 75
  6D 65 64 5F  61 66 74 65  72 0C 00 00</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="explaining_and_profiling_a_query"><a class="anchor" href="#explaining_and_profiling_a_query"></a>Explaining and profiling a query</h3>
<div class="paragraph">
<p>Profiling and query explanation is a mechanism of the underlying query engine, meaning there is no explicit protocol mechanism to trigger these.
Instead, profiling is triggered by prefixing your query with <code>PROFILE</code>, and explaining is triggered by prefixing your query with <code>EXPLAIN</code>.
The resulting query plan is returned at the end of the result stream, with the profiling information embedded if you ran <code>PROFILE</code>.</p>
</div>
<div class="listingblock">
<div class="title">Profile query</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bolt_exchange"># Handshake
Client: &lt;connect&gt;
Client: 60 60 B0 17
Client: 00 00 00 01  00 00 00 00  00 00 00 00  00 00 00 00
Server: 00 00 00 01

Client: INIT &quot;MyClient/1.0&quot; { &quot;scheme&quot;: &quot;basic&quot;, &quot;principal&quot;: &quot;neo4j&quot;, &quot;credentials&quot;: &quot;secret&quot;}

  00 40 B1 01  8C 4D 79 43  6C 69 65 6E  74 2F 31 2E
  30 A3 86 73  63 68 65 6D  65 85 62 61  73 69 63 89
  70 72 69 6E  63 69 70 61  6C 85 6E 65  6F 34 6A 8B
  63 72 65 64  65 6E 74 69  61 6C 73 86  73 65 63 72
  65 74 00 00

Server: SUCCESS { &quot;server&quot;: &quot;Neo4j/3.1.0&quot; }

  00 16 B1 70  A1 86 73 65  72 76 65 72  8B 4E 65 6F
  34 6A 2F 33  2E 31 2E 30  00 00

# Explaining the query will not execute it, so it returns an empty result and the query plan
Client: RUN &quot;EXPLAIN RETURN 1 AS num&quot; {}

  00 1C B2 10  D0 17 45 58  50 4C 41 49  4E 20 52 45
  54 55 52 4E  20 31 20 41  53 20 6E 75  6D A0 00 00

Server: SUCCESS { &quot;fields&quot;: [], &quot;result_available_after&quot;: 12 }

  00 24 B1 70  A2 86 66 69  65 6C 64 73  90 D0 16 72
  65 73 75 6C  74 5F 61 76  61 69 6C 61  62 6C 65 5F
  61 66 74 65  72 0C 00 00

Client: PULL_ALL

  00 02 B0 3F  00 00

Server: SUCCESS {
          &quot;type&quot;: &quot;r&quot;,
          &quot;result_consumed_after&quot;: 12,
          &quot;plan&quot;: {
            &quot;args&quot;: {
              &quot;runtime-impl&quot;: &quot;INTERPRETED&quot;,
              &quot;planner-impl&quot;: &quot;IDP&quot;,
              &quot;version&quot;: &quot;CYPHER 3.1&quot;,
              &quot;KeyNames&quot;: &quot;num&quot;,
              &quot;EstimatedRows&quot;: 1.0,
              &quot;planner&quot;: &quot;COST&quot;,
              &quot;runtime&quot;: &quot;INTERPRETED&quot;
            },
            &quot;children&quot;: [{
              &quot;args&quot;: {
                &quot;LegacyExpression&quot;: &quot;{  AUTOINT0}&quot;,
                &quot;EstimatedRows&quot;: 1.0},
              &quot;children&quot;: [],
              &quot;identifiers&quot;: [&quot;num&quot;],
              &quot;operatorType&quot;: &quot;Projection&quot;
            }],
            &quot;identifiers&quot;: [&quot;num&quot;],
            &quot;operatorType&quot;: &quot;ProduceResults&quot;
          }
        }

  01 57 B1 70  A3 84 74 79  70 65 81 72  D0 15 72 65
  73 75 6C 74  5F 63 6F 6E  73 75 6D 65  64 5F 61 66
  74 65 72 0C  84 70 6C 61  6E A4 84 61  72 67 73 A7
  8C 72 75 6E  74 69 6D 65  2D 69 6D 70  6C 8B 49 4E
  54 45 52 50  52 45 54 45  44 8C 70 6C  61 6E 6E 65
  72 2D 69 6D  70 6C 83 49  44 50 87 76  65 72 73 69
  6F 6E 8A 43  59 50 48 45  52 20 33 2E  31 88 4B 65
  79 4E 61 6D  65 73 83 6E  75 6D 8D 45  73 74 69 6D
  61 74 65 64  52 6F 77 73  C1 3F F0 00  00 00 00 00
  00 87 70 6C  61 6E 6E 65  72 84 43 4F  53 54 87 72
  75 6E 74 69  6D 65 8B 49  4E 54 45 52  50 52 45 54
  45 44 88 63  68 69 6C 64  72 65 6E 91  A4 84 61 72
  67 73 A2 D0  10 4C 65 67  61 63 79 45  78 70 72 65
  73 73 69 6F  6E 8C 7B 20  20 41 55 54  4F 49 4E 54
  30 7D 8D 45  73 74 69 6D  61 74 65 64  52 6F 77 73
  C1 3F F0 00  00 00 00 00  00 88 63 68  69 6C 64 72
  65 6E 90 8B  69 64 65 6E  74 69 66 69  65 72 73 91
  83 6E 75 6D  8C 6F 70 65  72 61 74 6F  72 54 79 70
  65 8A 50 72  6F 6A 65 63  74 69 6F 6E  8B 69 64 65
  6E 74 69 66  69 65 72 73  91 83 6E 75  6D 8C 6F 70
  65 72 61 74  6F 72 54 79  70 65 8E 50  72 6F 64 75
  63 65 52 65  73 75 6C 74  73 00 00


# Profiling the query will execute it, and the returned plan now includes the number of rows emitted from
# each part of the plan, as well as the number of database primitive operations that were executed.
Client: RUN &quot;PROFILE RETURN 1 AS num&quot; {}

  00 1C B2 10  D0 17 50 52  4F 46 49 4C  45 20 52 45
  54 55 52 4E  20 31 20 41  53 20 6E 75  6D A0 00 00

Server: SUCCESS { &quot;fields&quot;: [&quot;num&quot;], &quot;result_available_after&quot;: 12 }

   00 28 B1 70  A2 86 66 69  65 6C 64 73  91 83 6E 75
   6D D0 16 72  65 73 75 6C  74 5F 61 76  61 69 6C 61
   62 6C 65 5F  61 66 74 65  72 0C 00 00

Client: PULL_ALL

  00 02 B0 3F  00 00

Server: RECORD [1]

  00 04 b1 71  91 01 00 00

# Notice how this time, the response includes &quot;profile&quot; instead of &quot;plan&quot;, which is a Plan tree with
# additional 'DbHits' and 'Rows' metrics in the plan description:
Server: SUCCESS {
          &quot;type&quot;: &quot;r&quot;,
          &quot;result_consumed_after&quot;: 12,
          &quot;profile&quot;: {
            &quot;args&quot;: {
              &quot;planner-impl&quot;: &quot;IDP&quot;,
              &quot;KeyNames&quot;:&quot;num&quot;,
              &quot;runtime&quot;:&quot;INTERPRETED&quot;,
              &quot;runtime-impl&quot;:&quot;INTERPRETED&quot;,
              &quot;version&quot;:&quot;CYPHER 3.1&quot;,
              &quot;EstimatedRows&quot;:1.0,
              &quot;planner&quot;:&quot;COST&quot;,
              &quot;DbHits&quot;:0,
              &quot;Rows&quot;:1
            },
            &quot;operatorType&quot;:&quot;ProduceResults&quot;,
            &quot;rows&quot;:1,
            &quot;children&quot;: [
              {
                &quot;args&quot;: {
                  &quot;LegacyExpression&quot;:&quot;{  AUTOINT0}&quot;,
                  &quot;EstimatedRows&quot;:1.0,
                  &quot;DbHits&quot;:0,
                  &quot;Rows&quot;:1
                },
                &quot;operatorType&quot;:&quot;Projection&quot;,
                &quot;rows&quot;:1,
                &quot;children&quot;:[],
                &quot;dbHits&quot;:0,
                &quot;identifiers&quot;:[&quot;num&quot;]
              }
            ],
            &quot;dbHits&quot;:0,
            &quot;identifiers&quot;:[&quot;num&quot;]
          }
        }

  01 92 B1 70  A3 84 74 79  70 65 81 72  D0 15 72 65
  73 75 6C 74  5F 63 6F 6E  73 75 6D 65  64 5F 61 66
  74 65 72 0C  87 70 72 6F  66 69 6C 65  A6 84 61 72
  67 73 A9 8C  70 6C 61 6E  6E 65 72 2D  69 6D 70 6C
  83 49 44 50  88 4B 65 79  4E 61 6D 65  73 83 6E 75
  6D 87 72 75  6E 74 69 6D  65 8B 49 4E  54 45 52 50
  52 45 54 45  44 8C 72 75  6E 74 69 6D  65 2D 69 6D
  70 6C 8B 49  4E 54 45 52  50 52 45 54  45 44 87 76
  65 72 73 69  6F 6E 8A 43  59 50 48 45  52 20 33 2E
  31 8D 45 73  74 69 6D 61  74 65 64 52  6F 77 73 C1
  3F F0 00 00  00 00 00 00  87 70 6C 61  6E 6E 65 72
  84 43 4F 53  54 86 44 62  48 69 74 73  00 84 52 6F
  77 73 01 8C  6F 70 65 72  61 74 6F 72  54 79 70 65
  8E 50 72 6F  64 75 63 65  52 65 73 75  6C 74 73 84
  72 6F 77 73  01 88 63 68  69 6C 64 72  65 6E 91 A6
  84 61 72 67  73 A4 D0 10  4C 65 67 61  63 79 45 78
  70 72 65 73  73 69 6F 6E  8C 7B 20 20  41 55 54 4F
  49 4E 54 30  7D 8D 45 73  74 69 6D 61  74 65 64 52
  6F 77 73 C1  3F F0 00 00  00 00 00 00  86 44 62 48
  69 74 73 00  84 52 6F 77  73 01 8C 6F  70 65 72 61
  74 6F 72 54  79 70 65 8A  50 72 6F 6A  65 63 74 69
  6F 6E 84 72  6F 77 73 01  88 63 68 69  6C 64 72 65
  6E 90 86 64  62 48 69 74  73 00 8B 69  64 65 6E 74
  69 66 69 65  72 73 91 83  6E 75 6D 86  64 62 48 69
  74 73 00 8B  69 64 65 6E  74 69 66 69  65 72 73 91
  83 6E 75 6D  00 00</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="accessing_notifications"><a class="anchor" href="#accessing_notifications"></a>Accessing notifications</h3>
<div class="paragraph">
<p>When Neo4j executes a statement it may include notifications for the user.
These notifications can be warnings about problematic statements or other valuable information for a client.
Notifications are only included when using <code>EXPLAIN</code>.</p>
</div>
<div class="listingblock">
<div class="title">Notifications</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bolt_exchange"># Handshake
Client: &lt;connect&gt;
Client: 60 60 B0 17
Client: 00 00 00 01  00 00 00 00  00 00 00 00  00 00 00 00
Server: 00 00 00 01

Client: INIT &quot;MyClient/1.0&quot; { &quot;scheme&quot;: &quot;basic&quot;, &quot;principal&quot;: &quot;neo4j&quot;, &quot;credentials&quot;: &quot;secret&quot;}

  00 40 B1 01  8C 4D 79 43  6C 69 65 6E  74 2F 31 2E
  30 A3 86 73  63 68 65 6D  65 85 62 61  73 69 63 89
  70 72 69 6E  63 69 70 61  6C 85 6E 65  6F 34 6A 8B
  63 72 65 64  65 6E 74 69  61 6C 73 86  73 65 63 72
  65 74 00 00

Server: SUCCESS { &quot;server&quot;: &quot;Neo4j/3.1.0&quot; }

  00 16 B1 70  A1 86 73 65  72 76 65 72  8B 4E 65 6F
  34 6A 2F 33  2E 31 2E 30  00 00

# Sending a statement that would result in notifications
Client: RUN &quot;EXPLAIN MATCH (n), (m) RETURN n, m&quot; {}
  00 27 B2 10  D0 22 45 58  50 4C 41 49  4E 20 4D 41
  54 43 48 20  28 6E 29 2C  20 28 6D 29  20 52 45 54
  55 52 4E 20  6E 2C 20 6D  A0 00 00

Server: SUCCESS { &quot;fields&quot;: [], &quot;result_available_after&quot;: 12 }

  00 24 B1 70  A2 86 66 69  65 6C 64 73  90 D0 16 72
  65 73 75 6C  74 5F 61 76  61 69 6C 61  62 6C 65 5F
  61 66 74 65  72 0C 00 00

Client: PULL_ALL

  00 02 B0 3F  00 00

# Notifications are included in the response and each of them consists of `code`, `title` and `description`. A notification might also include `position` to indicate where the notification arises if it is applicable.
Server: SUCCESS {
          &quot;type&quot;: &quot;r&quot;,
          &quot;result_consumed_after&quot;: 12,
          &quot;plan&quot;: {
            &quot;args&quot;: {
              &quot;runtime-impl&quot;: &quot;INTERPRETED&quot;,
              &quot;planner-impl&quot;: &quot;IDP&quot;,
              &quot;version&quot;: &quot;CYPHER 3.1&quot;,
              &quot;KeyNames&quot;: &quot;n, m&quot;,
              &quot;EstimatedRows&quot;: 1.0,
              &quot;planner&quot;: &quot;COST&quot;,
              &quot;runtime&quot;: &quot;INTERPRETED&quot;
            },
            &quot;children&quot;: [{
              &quot;args&quot;: {&quot;EstimatedRows&quot;: 1.0},
              &quot;children&quot;: [{
                &quot;args&quot;: {&quot;EstimatedRows&quot;: 1.0},
                &quot;children&quot;: [],
                &quot;identifiers&quot;: [&quot;n&quot;],
                &quot;operatorType&quot;: &quot;AllNodesScan&quot;
                },{
                &quot;args&quot;: {&quot;EstimatedRows&quot;: 1.0},
                &quot;children&quot;: [],
                &quot;identifiers&quot;: [&quot;m&quot;],
                &quot;operatorType&quot;: &quot;AllNodesScan&quot;
              }],
              &quot;identifiers&quot;: [&quot;m&quot;, &quot;n&quot;],
              &quot;operatorType&quot;: &quot;CartesianProduct&quot;
            }],
            &quot;identifiers&quot;: [&quot;m&quot;, &quot;n&quot;],
            &quot;operatorType&quot;: &quot;ProduceResults&quot;
          },
          &quot;notifications&quot;: [{
            &quot;severity&quot;: &quot;WARNING&quot;,
            &quot;title&quot;: &quot;This query builds a cartesian product between disconnected patterns.&quot;,
            &quot;code&quot;: &quot;Neo.ClientNotification.Statement.CartesianProductWarning&quot;,
            &quot;description&quot;: &quot;If a part of a query contains multiple disconnected patterns, this will build a cartesian product between all those parts. This may produce a large amount of data and slow down query processing. While occasionally intended, it may often be possible to reformulate the query that avoids the use of this cross product, perhaps by adding a relationship between the different parts or by using OPTIONAL MATCH (identifier is: (m))&quot;,
            &quot;position&quot;: {
              &quot;offset&quot;: 0, &quot;column&quot;: 1, &quot;line&quot;: 1
            }
          }]
        }

  04 66 B1 70  A4 84 74 79  70 65 81 72  D0 15 72 65
  73 75 6C 74  5F 63 6F 6E  73 75 6D 65  64 5F 61 66
  74 65 72 0C  84 70 6C 61  6E A4 84 61  72 67 73 A7
  8C 72 75 6E  74 69 6D 65  2D 69 6D 70  6C 8B 49 4E
  54 45 52 50  52 45 54 45  44 8C 70 6C  61 6E 6E 65
  72 2D 69 6D  70 6C 83 49  44 50 87 76  65 72 73 69
  6F 6E 8A 43  59 50 48 45  52 20 33 2E  31 88 4B 65
  79 4E 61 6D  65 73 84 6E  2C 20 6D 8D  45 73 74 69
  6D 61 74 65  64 52 6F 77  73 C1 3F F0  00 00 00 00
  00 00 87 70  6C 61 6E 6E  65 72 84 43  4F 53 54 87
  72 75 6E 74  69 6D 65 8B  49 4E 54 45  52 50 52 45
  54 45 44 88  63 68 69 6C  64 72 65 6E  91 A4 84 61
  72 67 73 A1  8D 45 73 74  69 6D 61 74  65 64 52 6F
  77 73 C1 3F  F0 00 00 00  00 00 00 88  63 68 69 6C
  64 72 65 6E  92 A4 84 61  72 67 73 A1  8D 45 73 74
  69 6D 61 74  65 64 52 6F  77 73 C1 3F  F0 00 00 00
  00 00 00 88  63 68 69 6C  64 72 65 6E  90 8B 69 64
  65 6E 74 69  66 69 65 72  73 91 81 6E  8C 6F 70 65
  72 61 74 6F  72 54 79 70  65 8C 41 6C  6C 4E 6F 64
  65 73 53 63  61 6E A4 84  61 72 67 73  A1 8D 45 73
  74 69 6D 61  74 65 64 52  6F 77 73 C1  3F F0 00 00
  00 00 00 00  88 63 68 69  6C 64 72 65  6E 90 8B 69
  64 65 6E 74  69 66 69 65  72 73 91 81  6D 8C 6F 70
  65 72 61 74  6F 72 54 79  70 65 8C 41  6C 6C 4E 6F
  64 65 73 53  63 61 6E 8B  69 64 65 6E  74 69 66 69
  65 72 73 92  81 6D 81 6E  8C 6F 70 65  72 61 74 6F
  72 54 79 70  65 D0 10 43  61 72 74 65  73 69 61 6E
  50 72 6F 64  75 63 74 8B  69 64 65 6E  74 69 66 69
  65 72 73 92  81 6D 81 6E  8C 6F 70 65  72 61 74 6F
  72 54 79 70  65 8E 50 72  6F 64 75 63  65 52 65 73
  75 6C 74 73  8D 6E 6F 74  69 66 69 63  61 74 69 6F
  6E 73 91 A5  88 73 65 76  65 72 69 74  79 87 57 41
  52 4E 49 4E  47 85 74 69  74 6C 65 D0  44 54 68 69
  73 20 71 75  65 72 79 20  62 75 69 6C  64 73 20 61
  20 63 61 72  74 65 73 69  61 6E 20 70  72 6F 64 75
  63 74 20 62  65 74 77 65  65 6E 20 64  69 73 63 6F
  6E 6E 65 63  74 65 64 20  70 61 74 74  65 72 6E 73
  2E 84 63 6F  64 65 D0 38  4E 65 6F 2E  43 6C 69 65
  6E 74 4E 6F  74 69 66 69  63 61 74 69  6F 6E 2E 53
  74 61 74 65  6D 65 6E 74  2E 43 61 72  74 65 73 69
  61 6E 50 72  6F 64 75 63  74 57 61 72  6E 69 6E 67
  8B 64 65 73  63 72 69 70  74 69 6F 6E  D1 01 A9 49
  66 20 61 20  70 61 72 74  20 6F 66 20  61 20 71 75
  65 72 79 20  63 6F 6E 74  61 69 6E 73  20 6D 75 6C
  74 69 70 6C  65 20 64 69  73 63 6F 6E  6E 65 63 74
  65 64 20 70  61 74 74 65  72 6E 73 2C  20 74 68 69
  73 20 77 69  6C 6C 20 62  75 69 6C 64  20 61 20 63
  61 72 74 65  73 69 61 6E  20 70 72 6F  64 75 63 74
  20 62 65 74  77 65 65 6E  20 61 6C 6C  20 74 68 6F
  73 65 20 70  61 72 74 73  2E 20 54 68  69 73 20 6D
  61 79 20 70  72 6F 64 75  63 65 20 61  20 6C 61 72
  67 65 20 61  6D 6F 75 6E  74 20 6F 66  20 64 61 74
  61 20 61 6E  64 20 73 6C  6F 77 20 64  6F 77 6E 20
  71 75 65 72  79 20 70 72  6F 63 65 73  73 69 6E 67
  2E 20 57 68  69 6C 65 20  6F 63 63 61  73 69 6F 6E
  61 6C 6C 79  20 69 6E 74  65 6E 64 65  64 2C 20 69
  74 20 6D 61  79 20 6F 66  74 65 6E 20  62 65 20 70
  6F 73 73 69  62 6C 65 20  74 6F 20 72  65 66 6F 72
  6D 75 6C 61  74 65 20 74  68 65 20 71  75 65 72 79
  20 74 68 61  74 20 61 76  6F 69 64 73  20 74 68 65
  20 75 73 65  20 6F 66 20  74 68 69 73  20 63 72 6F
  73 73 20 70  72 6F 64 75  63 74 2C 20  70 65 72 68
  61 70 73 20  62 79 20 61  64 64 69 6E  67 20 61 20
  72 65 6C 61  74 69 6F 6E  73 68 69 70  20 62 65 74
  77 65 65 6E  20 74 68 65  20 64 69 66  66 65 72 65
  6E 74 20 70  61 72 74 73  20 6F 72 20  62 79 20 75
  73 69 6E 67  20 4F 50 54  49 4F 4E 41  4C 20 4D 41
  54 43 48 20  28 69 64 65  6E 74 69 66  69 65 72 20
  69 73 3A 20  28 6D 29 29  88 70 6F 73  69 74 69 6F
  6E A3 86 6F  66 66 73 65  74 00 86 63  6F 6C 75 6D
  6E 01 84 6C  69 6E 65 01  00 00</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resetting_the_session"><a class="anchor" href="#resetting_the_session"></a>Resetting the session</h3>
<div class="paragraph">
<p>This illustrates how to reset the session to a "clean" state.</p>
</div>
<div class="listingblock">
<div class="title">Resetting</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bolt_exchange"># Handshake
Client: &lt;connect&gt;
Client: 60 60 B0 17
Client: 00 00 00 01  00 00 00 00  00 00 00 00  00 00 00 00
Server: 00 00 00 01

Client: INIT &quot;MyClient/1.0&quot; { &quot;scheme&quot;: &quot;basic&quot;, &quot;principal&quot;: &quot;neo4j&quot;, &quot;credentials&quot;: &quot;secret&quot;}

  00 40 B1 01  8C 4D 79 43  6C 69 65 6E  74 2F 31 2E
  30 A3 86 73  63 68 65 6D  65 85 62 61  73 69 63 89
  70 72 69 6E  63 69 70 61  6C 85 6E 65  6F 34 6A 8B
  63 72 65 64  65 6E 74 69  61 6C 73 86  73 65 63 72
  65 74 00 00

Server: SUCCESS { &quot;server&quot;: &quot;Neo4j/3.1.0&quot; }

  00 16 B1 70  A1 86 73 65  72 76 65 72  8B 4E 65 6F
  34 6A 2F 33  2E 31 2E 30  00 00

# Batch of messages
Client: RUN &quot;RETURN 1 AS num&quot; {}

  00 13 b2 10  8f 52 45 54  55 52 4e 20  31 20 41 53
  20 6e 75 6d  a0 00 00

# Server responses
Server: SUCCESS { &quot;fields&quot;: [&quot;num&quot;], &quot;result_available_after&quot;: 12 }

  00 28 B1 70  A2 86 66 69  65 6C 64 73  91 83 6E 75
  6D D0 16 72  65 73 75 6C  74 5F 61 76  61 69 6C 61
  62 6C 65 5F  61 66 74 65  72 0C 00 00

Client: RESET {}

  00 02 b0 0f  00 00

Server: SUCCESS {}

  00 03 b1 70  a0 00 00</code></pre>
</div>
</div>
</div>
</div>
</div>
    </div>
  </div>
</section>

<footer class="row">
  <div class="large-12 columns">
    <hr/>
    <div class="row">
      <div class="large-12 columns">
        <p>Licensed under <a href="https://creativecommons.org/licenses/by-sa/3.0/">Creative Commons 3.0 Attribution-ShareAlike</a>.</p>
        <p><a href="https://github.com/neo4j/neo4j/tree/3.0.6/manual/bolt/src/docs/dev">Originally authored</a> by <a href="https://neo4j.com">Neo Technology, Inc.</a>, with modifications to original source for publishing and clarity.</p>
      </div>
    </div>
  </div>
</footer>

<script src="/js/vendor/jquery.js"></script>
<script src="/js/foundation.min.js"></script>
<script>
  $(document).foundation();
</script>
<script src="/js/vendor/jquery.js"></script>
<script src="/js/foundation/foundation.js"></script>
<script>
  $(document).foundation();
  var doc = document.documentElement;
  doc.setAttribute('data-useragent', navigator.userAgent);
</script>
</body>
</html>
